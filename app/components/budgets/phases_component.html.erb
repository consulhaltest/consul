<section class="budget-phases">
  <header>
    <h2><%= t("budgets.index.all_phases") %></h2>
  </header>

  <ul class="phases-list tabs" data-tabs id="budget_phases_tabs" data-deep-link="true">
    <% phases.each_with_index do |phase, index| %>
      <li class="phase-title tabs-title <%= "is-active" if phase.current? %>" <%= "aria-current=step" if phase.current? %>>
        <a href="#<%= index + 1 %>"
           data-turbolinks="false">
          <% if phase.current? %>
            <span class="current-phase-timeline"><%= t("budgets.index.current_phase") %></span>
          <% end %>

          <span class="phase-name"><%= phase_name(phase) %></span>
        </a>
      </li>
    <% end %>
  </ul>

  <div class="tabs-content" data-tabs-content="budget_phases_tabs">
    <% phases.each_with_index do |phase, index| %>
      <div class="tabs-panel <%= "is-active" if phase.current? %>"
           id="<%= index + 1 %>" data-turbolinks="false">

        <% if phases.first == phase %>
          <span class="budget-prev-phase-disabled"></span>
        <% else %>
          <a href="#<%= (index + 1) - 1 %>" title="<%= t("budgets.index.prev_phase") %>"
             class="budget-prev-phase">
            <span class="show-for-sr"><%= t("budgets.index.prev_phase") %></span>
          </a>
        <% end %>

        <% if phases.last == phase %>
          <span class="budget-next-phase-disabled"></span>
        <% else %>
          <a href="#<%= (index + 1) + 1 %>" title="<%= t("budgets.index.next_phase") %>"
             class="budget-next-phase">
            <span class="show-for-sr"><%= t("budgets.index.next_phase") %></span>
          </a>
        <% end %>

        <div id="<%= phase.kind.parameterize %>" class="budget-phase">
          <h3><%= phase_name(phase) %></h3>
          <p><%= start_date(phase) %> - <%= end_date(phase) %></p>
          <%= auto_link_already_sanitized_html(wysiwyg(phase.description)) %>
        </div>
      </div>
    <% end %>
  </div>
</section>
